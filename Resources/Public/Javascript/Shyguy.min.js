class InsertSoftHyphenHandler{constructor(){this.btnInsertShy=document.querySelector('a[href="#insertSoftHyphen"]'),this.init()}init(){return this.btnInsertShy&&this.btnInsertShy.addEventListener("mousedown",this.handleInsertShyClick.bind(this)),this.replaceDomGlyphes(),this}handleInsertShyClick(e){e.preventDefault();let t=document.activeElement,n=document.querySelector(".ck-editor__editable_inline"),i=n.ckeditorInstance;if(!0===i.editing.view.document.isFocused)i.execute("insertText",{text:"\xad"}),i.editing.view.focus();else if("input"===t.tagName.toLowerCase()||"textarea"===t.tagName.toLowerCase()){let r=this.getCaretPosition(t);t.value=this.replaceRange(t.value,r.start,r.end,"↵"),t.dispatchEvent(new Event("change",{bubbles:!0})),t.dispatchEvent(new Event("keyup",{bubbles:!0}))}}replaceDomGlyphes(){let e=document.querySelectorAll('input, .form-wizards-element textarea[id^="formengine-textarea-"]');e.forEach(function(e){e.value=e.value.replace(/(\&shy;|\­)/gi,"↵")})}getCaretPosition(e){return{start:e.selectionStart??0,end:e.selectionEnd??0}}replaceRange(e,t,n,i){return e.substring(0,t)+i+e.substring(n)}}export default new InsertSoftHyphenHandler;
